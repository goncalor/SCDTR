\subsection{System Characteristics}
\label{sec:SystemCharacteristics}

\subsubsection{Steady State}
\label{sub:SteadyState}

The steady state response of the system was determined by setting the duty cycle of the LED to all values in the PWM range 0--255. \textcolor{red}{Each sample was acquired \SI{200}{\milli\second} after the previous one so that the system had time to reach a steady state. This is an adequate time between samples because $RC$ constant of the detector circuit in \autoref{fig:setup_LDR_circuit} is $\tau = R_2C_1 = \SI{60}{\milli\second}$ and \SI{400}{\milli\second} amounts to $3\tau$. The reason why $R_2$ is in the time constant and not $R_3$ is because the PWM value was incremented and hence $C_1$ charges via $R_2$. If the data was acquired while decrementing the PWM value $R_3$ would be used instead.}

% explain R_2's value above?

A graph of the acquired data can be seen in \autoref{fig:steady_state}. We conclude that the resistance of the LDR does not vary linearly with the duty cycle on the LED.

\begin{figure}[h]
    \centering
    \resizebox{\textwidth}{!}{\input{img/steady_state}}
    \caption{Steady state voltage at pin \texttt{A0} as a function of the duty cycle of the LED}
    \label{fig:steady_state}
\end{figure}

\subsubsection{Step Response}
\label{sub:StepResponse}

\begin{figure}[h]
    \centering
    \includegraphics[width=.85\textwidth]{img/step_response}
    \caption{}
    \label{fig:step_response}
\end{figure}

\subsubsection{Incremental Response}
\label{sub:IncrementalResponse}

\begin{figure}[h]
    \centering
    \includegraphics[width=.85\textwidth]{img/incstep_response}
    \caption{}
    \label{fig:incstep_response}
\end{figure}

\subsubsection{Modeling the LDR}
\label{subsubsec:LDR_model}

\begin{figure}[h]
    \centering
    \includegraphics[width=.4\textwidth]{img/LDR_datasheet}
    \caption{}
    \label{fig:LDR_datasheet}
\end{figure}

\begin{figure}[h]
    \centering
    \resizebox{\textwidth}{!}{\input{img/LDR_model}}
    \caption{Resistance of the LRD as function of the incident illuminance}
    \label{fig:LDR_model}
\end{figure}

\subsubsection{LDR to Lux}
\label{sub:LDRtoLux}

\begin{figure}[h]
    \centering
    \resizebox{\textwidth}{!}{\input{img/pwm_to_lux}}
    \caption{Illuminance detected by the LDR in function of the duty of the LED}
    \label{fig:pwm_to_lux}
\end{figure}

